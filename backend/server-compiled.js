(()=>{var e={860:e=>{"use strict";e.exports=require("express")},13:e=>{"use strict";e.exports=require("mongodb")},109:e=>{"use strict";e.exports=require("sanitize-html")}},t={};function s(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,s),a.exports}(()=>{const{MongoClient:e,ObjectId:t}=s(13),o=s(860),n=s(109);let a;const i=o();i.set("view engine","ejs"),i.set("views","./views"),i.use(o.static("../public")),i.use(o.json()),i.use(o.urlencoded({extended:!1})),i.get("/",(async(e,t)=>{const s=await a.collection("Tasks").find().toArray();console.log(s),t.render("home",{allTasks:s})})),i.get("/admin",((e,t)=>{t.render("admin")})),i.get("/api/tasks",(async(e,t)=>{const s=await a.collection("Tasks").find().toArray();t.json(s)})),i.post("/create-task",((e,t,s)=>{e.cleanData={name:n(e.body.name.trim(),{allowedTags:[],allowedAttributes:{}}),description:n(e.body.description.trim(),{allowedTags:[],allowedAttributes:{}}),status:n(e.body.status.trim(),{allowedTags:[],allowedAttributes:{}})},s()}),(async(e,s)=>{console.log(e.body);const o=await a.collection("Tasks").insertOne(e.cleanData),n=await a.collection("Tasks").findOne({_id:new t(o.insertId)});s.send(n)})),i.delete("/task/:id",(async(e,s)=>{a.collection("Tasks").deleteOne({_id:new t(e.params.id)}),s.send("Item Deleted")})),async function(){const t=new e("mongodb://root:root@localhost:27017/Kanban-App?&authSource=admin");await t.connect(),a=t.db(),i.listen(3e3)}()})()})();